(function(){var e,r,t,n,o,s,i={exports:{}},c=i.exports;c.name="text",c.create=function(){return""},e=function(e){var r,t,n,o;if(!Array.isArray(e))throw Error("Op must be an array of components");for(t=null,n=0,o=e.length;o>n;n++){switch(r=e[n],typeof r){case"object":if(!("number"==typeof r.d&&r.d>0))throw Error("Object components must be deletes of size > 0");break;case"string":if(!(r.length>0))throw Error("Inserts cannot be empty");break;case"number":if(!(r>0))throw Error("Skip components must be >0");if("number"==typeof t)throw Error("Adjacent skip components should be combined")}t=r}if("number"==typeof t)throw Error("Op has a trailing skip")},t=function(e){return function(r){return r&&0!==r.d?0===e.length?e.push(r):typeof r==typeof e[e.length-1]?"object"==typeof r?e[e.length-1].d+=r.d:e[e.length-1]+=r:e.push(r):void 0}},n=function(e){var r,t,n,o;return r=0,t=0,o=function(n,o){var s,i;return r===e.length?-1===n?null:n:(s=e[r],"number"==typeof s?-1===n||n>=s-t?(i=s-t,++r,t=0,i):(t+=n,n):"string"==typeof s?-1===n||"i"===o||n>=s.length-t?(i=s.slice(t),++r,t=0,i):(i=s.slice(t,t+n),t+=n,i):-1===n||"d"===o||n>=s.d-t?(i={d:s.d-t},++r,t=0,i):(t+=n,{d:n}))},n=function(){return e[r]},[o,n]},r=function(e){return"number"==typeof e?e:e.length||e.d},s=function(e){return e.length>0&&"number"==typeof e[e.length-1]&&e.pop(),e},c.normalize=function(e){var r,n,o,i,c;for(o=[],r=t(o),i=0,c=e.length;c>i;i++)n=e[i],r(n);return s(o)},c.apply=function(r,t){var n,o,s,i,c;if("string"!=typeof r)throw Error("Snapshot should be a string");for(e(t),s=0,o=[],i=0,c=t.length;c>i;i++)switch(n=t[i],typeof n){case"number":if(n>r.length)throw Error("The op is too long for this document");o.push(r.slice(0,n)),r=r.slice(n);break;case"string":o.push(n);break;case"object":r=r.slice(n.d)}return o.join("")+r},c.transform=function(o,i,c){var f,a,u,h,p,b,l,g,m,d,y;if("left"!==c&&"right"!==c)throw Error("side ("+c+") must be 'left' or 'right'");for(e(o),e(i),p=[],f=t(p),y=n(o),g=y[0],l=y[1],m=0,d=i.length;d>m;m++)switch(u=i[m],typeof u){case"number":for(h=u;h>0;)a=g(h,"i"),f(a),"string"!=typeof a&&(h-=r(a));break;case"string":"left"===c&&(b=l(),"string"==typeof b&&f(g(-1))),f(u.length);break;case"object":for(h=u.d;h>0;)switch(a=g(h,"i"),typeof a){case"number":h-=a;break;case"string":f(a);break;case"object":h-=a.d}}for(;u=g(-1);)f(u);return s(p)},c.compose=function(o,i){var c,f,a,u,h,p,b,l,g,m;for(e(o),e(i),h=[],c=t(h),m=n(o),p=m[0],b=m[1],l=0,g=i.length;g>l;l++)switch(a=i[l],typeof a){case"number":for(u=a;u>0;)f=p(u,"d"),c(f),"object"!=typeof f&&(u-=r(f));break;case"string":c(a);break;case"object":for(u=a.d;u>0;)switch(f=p(u,"d"),typeof f){case"number":c({d:f}),u-=f;break;case"string":u-=f.length;break;case"object":c(f)}}for(;a=p(-1);)c(a);return s(h)},o=function(e,r){var t,n,o,s;for(n=0,o=0,s=r.length;s>o&&(t=r[o],!(n>=e));o++)switch(typeof t){case"number":if(n+t>=e)return e;n+=t;break;case"string":n+=t.length,e+=t.length;break;case"object":e-=Math.min(t.d,e-n)}return e},c.transformCursor=function(e,r,t){var n,s,i,c;if(s=0,t){for(i=0,c=r.length;c>i;i++)switch(n=r[i],typeof n){case"number":s+=n;break;case"string":s+=n.length}return[s,s]}return[o(e[0],r),o(e[1],r)]};var f=window.ottypes=window.ottypes||{},a=i.exports;f[a.name]=a,c.uri&&(f[c.uri]=a)})();